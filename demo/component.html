<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
	<title>Demo</title>
	<link rel="stylesheet" type="text/css" href="../dist/theme/gray.css"/>
	<link rel="stylesheet" type="text/css" href="css/main.css"/>
</head>
<body>
<div id="container"></div>

<script type="text/javascript" src="../node_modules/react/umd/react.development.js"></script>
<script type="text/javascript" src="../node_modules/react-dom/umd/react-dom.development.js"></script>
<script type="text/javascript" src="../node_modules/prop-types/prop-types.js"></script>
<script type="text/javascript" src="js/browser.min.js"></script>

<script type="text/javascript" src="../dist/react-tabber.js"></script>
<script type="text/babel">
	class App extends React.Component {
		constructor(props) {
			super(props);

			this.state = {
				targetIndex: 0,
				tabs: [
					{label: 'title1', panel: <div>content1</div>},
					{label: <span>title2</span>, panel: <div>content2</div>}
				]
			};

			this.onUpdateActivePosition = this.onUpdateActivePosition.bind(this);
			this.onSwitching = this.onSwitching.bind(this);
			this.addTab = this.addTab.bind(this);
			this.removeTab = this.removeTab.bind(this);
			this.prevTab = this.prevTab.bind(this);
			this.nextTab = this.nextTab.bind(this);
		}

		onUpdateActivePosition(pos) {
			this.setState({
				targetIndex: pos.index
			})
		}

		onSwitching(from, to) {
			console.log('switching ', from, to);
		}

		addTab() {
			const newTabs = this.state.tabs;
			newTabs.push({
				label: 'label-' + (newTabs.length + 1),
				panel: 'content-' + (newTabs.length + 1)
			});

			this.setState({
				tabs: newTabs
			});
		}

		removeTab() {
			if (this.state.tabs.length) {
				const newTabs = this.state.tabs;
				newTabs.length--;

				this.setState({
					tabs: newTabs
				});
			}
		}

		prevTab() {
			const tabs = this.state.tabs;
			const targetIndex = this.state.targetIndex;

			const tabCount = tabs.length;
			const newIndex = (targetIndex - 1 + tabCount) % tabCount;
			this.setState({
				targetIndex: newIndex
			});
		}

		nextTab() {
			const tabs = this.state.tabs;
			const targetIndex = this.state.targetIndex;

			const tabCount = tabs.length;
			const newIndex = (targetIndex + 1) % tabCount;
			this.setState({
				targetIndex: newIndex
			});
		}

		render() {
			const tabs = this.state.tabs;
			const targetIndex = this.state.targetIndex;

			return <div>
				<ReactTabber activePosition={targetIndex} tabs={tabs} onUpdateActivePosition={this.onUpdateActivePosition} onSwitching={this.onSwitching}/>
				<button onClick={this.addTab}>Add Tab</button>
				<button onClick={this.removeTab}>Remove Tab</button>
				<br/>
				<button onClick={this.prevTab}>Prev Tab</button>
				<button onClick={this.nextTab}>Next Tab</button>
			</div>;
		}
	}

	ReactDOM.render(<App/>, document.getElementById('container'));
</script>
</body>
</html>
